!function(p,f){"use strict";function u(e){return Math.ceil(12*Math.log(e)+26)}f.behaviors.envEformWildlifeTradePermit={attach:function(e,t){if(p("#water-through-time").length){p(window).load(function(){p.get(f.settings.pathToEWModule+"/data/waterThroughTime.json",function(e){m=e.dates,a()})});var a=function(){p(".fade").fadeIn(),p.each(m,function(e,t){var a=r();p(".date",a).attr("data-id",t.id),p(".date",a).addClass(t.type),p(".date",a).html(t.label);var i=a[0].outerHTML;p(".dates").append(i),n(t)&&o(t)}),p.each(m,function(e,t){var a=d();a.attr("value",t.id),a.text(t.label);var i=a[0].outerHTML;p(".dates-select").append(i)}),i()},n=function(e){return e.is_default},o=function(a){a.type;p(".dates a").removeClass("active"),p.each(p(".dates a"),function(e,t){p(t).attr("data-id")==a.id&&(p(t).addClass("active"),l(a.items))}),p("#water-through-time").removeClass().addClass(a.type),p(".title .year").html(a.label),p(".title #type-title").html(a.type),"flood"==a.type?p(".title #type-title").html("very wet"):p(".title #type-title").html(a.type)},i=function(){p(".dates .date").on("click",function(t){t.preventDefault(),p(".fade").fadeOut("200",function(){var e=p(t.target).data("id");p(".dates a").removeClass("active"),s(e),p(".fade").fadeIn()})}),p(".dates-select").on("change",function(e){p(".fade").fadeOut("200",function(){s(e.target.value),p(".fade").fadeIn()})})},s=function(a){p.each(m,function(e,t){parseInt(a)===t.id&&o(t)})},l=function(e){p("#item-list").children().remove(),p.each(e,function(e,t){var a,i=c();i.addClass("item"+t.item_no),1!==t.item_no&&5!==t.item_no&&7!==t.item_no||i.addClass("arrow-bottom left"),2!==t.item_no&&6!==t.item_no||i.addClass("arrow-bottom right"),3!==t.item_no&&4!=t.item_no||i.addClass("arrow-top left"),i.attr("href",t.url),0<t.water_inner&&(a=u(t.water_inner),p(".water .water-inner",i).css({width:a+"px",height:a+"px","margin-top":"-"+a/2+"px","margin-left":"-"+a/2+"px",display:"block"})),0<t.water_outer&&(a=u(t.water_outer),p(".water .water-outer",i).css({width:a+"px",height:a+"px","margin-top":"-"+a/2+"px","margin-left":"-"+a/2+"px",display:"block"})),1==t.works&&p(".inner .icons .works",i).css("display","block"),p(".header",i).html(t.name),p(".inner .amount",i).html(t.gl_amount+" GL"),p(".inner .icons .vegetation",i).addClass(t.vegetation),p(".inner .icons .waterbirds",i).addClass(t.waterbirds),p(".inner .icons .fish",i).addClass(t.fish),console.log("here?"),h(t.vegetation,"vegetation",i),h(t.waterbirds,"waterbirds",i),h(t.fish,"fish",i);var n=i[0].outerHTML;p("#item-list").append(n)})},r=function(){return p(".date-tpl").clone().removeClass("date-tpl")},d=function(){return p(".date-select-tpl").clone().removeClass("date-select-tpl")},c=function(){return p(".item-tpl").clone().removeClass("item-tpl")},h=function(e,t,a){"improvement"==e?(console.log("1"),p(".inner .icons ."+t+"-wrap .icon-improvement",a).css("display","block")):"no-change"==e?(console.log("2"),p(".inner .icons ."+t+"-wrap .icon-no-change",a).css("display","block")):"decline"==e&&(console.log("3"),p(".inner .icons ."+t+"-wrap .icon-decline",a).css("display","block"))}}if(p(document).ready(function(){p(".main-table").length&&p(".main-table").clone(!0).appendTo("#table-scroll").addClass("clone"),p(".field-name-field-ew-pb-additional-images").length&&p(".field-name-field-ew-pb-additional-images .field-items").slick({mobileFirst:!0,dots:!0,infinite:!0,centerMode:!0,slidesToShow:1,slidesToScroll:1,centerPadding:"25%",arrows:!0,responsive:[{breakpoint:1024,settings:{centerPadding:"25%"}},{breakpoint:600,settings:{centerPadding:"5%"}},{breakpoint:300,settings:{centerPadding:"0%"}}]})}),p(".water-summary").length&&("block"==p("ul.ws-tabs").css("display")&&p("ul.ws-tabs").each(function(){var t,a,e=p(this).find("a");(t=p(e.filter('[href="'+location.hash+'"]')[0]||e[0])).addClass("active"),a=p(t[0].hash),e.not(t).each(function(){p(this.hash).fadeOut()}),p(this).on("click","a",function(e){e.preventDefault(),t.removeClass("active"),a.fadeOut(function(){t.addClass("active"),a.fadeIn()}),t=p(this),a=p(this.hash)})}),"none"==p("ul.ws-tabs").css("display")&&p(".ws-tab-content .nav-mobile-tab").on("click",function(e){e.preventDefault();var t=p(this).next();p(t).stop().slideToggle()})),p(".whos-who").length){var m;p(document).ready(function(){p(".whos-who-river").on("click",".item .ww-footer",function(){p(this).prev().hasClass("open")?(p(this).prev().removeClass("open"),p(this).prev().stop().slideUp(),p(this).removeClass("close"),p(this).html('<svg aria-hidden="true" data-prefix="far" data-icon="chevron-down" class="chevron-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M441.9 167.3l-19.8-19.8c-4.7-4.7-12.3-4.7-17 0L224 328.2 42.9 147.5c-4.7-4.7-12.3-4.7-17 0L6.1 167.3c-4.7 4.7-4.7 12.3 0 17l209.4 209.4c4.7 4.7 12.3 4.7 17 0l209.4-209.4c4.7-4.7 4.7-12.3 0-17z"></path></svg> Main Activities')):(p(this).prev().addClass("open"),p(this).prev().stop().slideDown(),p(this).addClass("close"),p(this).html('<svg aria-hidden="true" data-prefix="far" data-icon="times" class="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z"></path></svg> Close'))})}),p(window).load(function(){p.get(f.settings.pathToEWModule+"/data/whosWho.json",function(e){m=e.who_who.items,a()})});a=function(){p.each(m,function(e,t){var a=c();a.addClass("item"+t.item_no),p(".info h4",a).html(t.label),p(".info p",a).html(t.summary),p(".info img",a).attr("src",f.settings.pathToEWModule+"/img/whos-who/"+t.img),p(".inner",a).html(t.text);var i=a[0].outerHTML;p("#item-list").append(i)})},c=function(){return p(".item-tpl").clone().removeClass("item-tpl")}}}}}(jQuery,Drupal);