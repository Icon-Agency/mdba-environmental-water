!function(f,p){"use strict";p.behaviors.envEformWildlifeTradePermit={attach:function(e,t){if(f("#water-through-time").length){f(window).load(function(){f.get(p.settings.pathToEWModule+"/data/waterThroughTime.json",function(e){m=e.dates,a()})});var a=function(){f(".fade").fadeIn(),f.each(m,function(e,t){var a=l();f(".date",a).attr("data-id",t.id),f(".date",a).addClass(t.type),f(".date",a).html(t.label);var n=a[0].outerHTML;f(".dates").append(n),i(t)&&o(t)}),f.each(m,function(e,t){var a=d();a.attr("value",t.id),a.text(t.label);var n=a[0].outerHTML;f(".dates-select").append(n)}),n()},i=function(e){return e.is_default},o=function(a){a.type;f(".dates a").removeClass("active"),f.each(f(".dates a"),function(e,t){f(t).attr("data-id")==a.id&&(f(t).addClass("active"),r(a.items))}),f("#water-through-time").removeClass().addClass(a.type),f(".title .year").html(a.label),f(".title #type-title").html(a.type)},n=function(){f(".dates .date").on("click",function(t){t.preventDefault(),f(".fade").fadeOut("200",function(){var e=f(t.target).data("id");f(".dates a").removeClass("active"),s(e),f(".fade").fadeIn()})}),f(".dates-select").on("change",function(e){f(".fade").fadeOut("200",function(){s(e.target.value),f(".fade").fadeIn()})})},s=function(a){f.each(m,function(e,t){parseInt(a)===t.id&&o(t)})},r=function(e){f("#item-list").children().remove(),f.each(e,function(e,t){var a=c();a.addClass("item"+t.item_no),1!==t.item_no&&5!==t.item_no&&7!==t.item_no||a.addClass("arrow-bottom left"),2!==t.item_no&&6!==t.item_no||a.addClass("arrow-bottom right"),3!==t.item_no&&4!=t.item_no||a.addClass("arrow-top left"),a.attr("href",t.url),0<t.water_inner&&f(".water .water-inner",a).css({width:t.water_inner+"px",height:t.water_inner+"px","margin-top":"-"+t.water_inner/2+"px","margin-left":"-"+t.water_inner/2+"px",display:"block"}),0<t.water_outer&&f(".water .water-outer",a).css({width:t.water_outer+"px",height:t.water_outer+"px","margin-top":"-"+t.water_outer/2+"px","margin-left":"-"+t.water_outer/2+"px",display:"block"}),1==t.works&&f(".inner .icons .works",a).css("display","block"),f(".header",a).html(t.name),f(".inner .amount",a).html(t.gl_amount+" GL"),f(".inner .icons .vegetation",a).addClass(t.vegetation),f(".inner .icons .waterbirds",a).addClass(t.waterbirds),f(".inner .icons .fish",a).addClass(t.fish),console.log("here?"),h(t.vegetation,"vegetation",a),h(t.waterbirds,"waterbirds",a),h(t.fish,"fish",a);var n=a[0].outerHTML;f("#item-list").append(n)})},l=function(){return f(".date-tpl").clone().removeClass("date-tpl")},d=function(){return f(".date-select-tpl").clone().removeClass("date-select-tpl")},c=function(){return f(".item-tpl").clone().removeClass("item-tpl")},h=function(e,t,a){"improvement"==e?(console.log("1"),f(".inner .icons ."+t+"-wrap .icon-improvement",a).css("display","block")):"no-change"==e?(console.log("2"),f(".inner .icons ."+t+"-wrap .icon-no-change",a).css("display","block")):"decline"==e&&(console.log("3"),f(".inner .icons ."+t+"-wrap .icon-decline",a).css("display","block"))}}if(f(document).ready(function(){f(".main-table").length&&f(".main-table").clone(!0).appendTo("#table-scroll").addClass("clone"),f(".field-name-field-ew-pb-additional-images").length&&f(".field-name-field-ew-pb-additional-images .field-items").slick({mobileFirst:!0,dots:!0,infinite:!0,centerMode:!0,slidesToShow:1,slidesToScroll:1,centerPadding:"25%",arrows:!0,responsive:[{breakpoint:1024,settings:{centerPadding:"25%"}},{breakpoint:600,settings:{centerPadding:"5%"}},{breakpoint:300,settings:{centerPadding:"0%"}}]})}),f(".water-summary").length&&("block"==f("ul.ws-tabs").css("display")&&f("ul.ws-tabs").each(function(){var t,a,e=f(this).find("a");(t=f(e.filter('[href="'+location.hash+'"]')[0]||e[0])).addClass("active"),a=f(t[0].hash),e.not(t).each(function(){f(this.hash).fadeOut()}),f(this).on("click","a",function(e){e.preventDefault(),t.removeClass("active"),a.fadeOut(function(){t.addClass("active"),a.fadeIn()}),t=f(this),a=f(this.hash)})}),"none"==f("ul.ws-tabs").css("display")&&f(".ws-tab-content .nav-mobile-tab").on("click",function(e){e.preventDefault();var t=f(this).next();f(t).stop().slideToggle()})),f(".whos-who").length){var m;f(document).ready(function(){f(".whos-who-river").on("click",".item .ww-footer",function(){f(this).prev().hasClass("open")?(f(this).prev().removeClass("open"),f(this).prev().stop().slideUp(),f(this).removeClass("close"),f(this).html('<svg aria-hidden="true" data-prefix="far" data-icon="chevron-down" class="chevron-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M441.9 167.3l-19.8-19.8c-4.7-4.7-12.3-4.7-17 0L224 328.2 42.9 147.5c-4.7-4.7-12.3-4.7-17 0L6.1 167.3c-4.7 4.7-4.7 12.3 0 17l209.4 209.4c4.7 4.7 12.3 4.7 17 0l209.4-209.4c4.7-4.7 4.7-12.3 0-17z"></path></svg> Main Activities')):(f(this).prev().addClass("open"),f(this).prev().stop().slideDown(),f(this).addClass("close"),f(this).html('<svg aria-hidden="true" data-prefix="far" data-icon="times" class="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z"></path></svg> Close'))})}),f(window).load(function(){f.get(p.settings.pathToEWModule+"/data/whosWho.json",function(e){m=e.who_who.items,a()})});a=function(){f.each(m,function(e,t){var a=c();a.addClass("item"+t.item_no),f(".info h4",a).html(t.label),f(".info p",a).html(t.summary),f(".info img",a).attr("src",p.settings.pathToEWModule+"/img/whos-who/"+t.img),f(".inner",a).html(t.text);var n=a[0].outerHTML;f("#item-list").append(n)})},c=function(){return f(".item-tpl").clone().removeClass("item-tpl")}}}}}(jQuery,Drupal);